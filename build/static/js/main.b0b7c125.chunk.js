(this.webpackJsonpcodepenfill=this.webpackJsonpcodepenfill||[]).push([[0],{27:function(e,t,n){},28:function(e,t,n){},30:function(e,t,n){},46:function(e,t,n){},76:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){"use strict";n.r(t);var r,i=n(1),a=n.n(i),c=n(21),o=n.n(c),s=(n(46),n(7)),u=n(12),l=n(9),p=n(10),d=n(2),j=n.n(d),b=n(4),v=function(e){return{type:"PROMISE",status:"PENDING",name:e}},h=function(e,t){return{type:"PROMISE",status:"RESOLVED",name:e,payload:t}},O=function(e,t){return{type:"PROMISE",status:"REJECTED",name:e,error:t}},f=function(e,t){return function(){var n=Object(b.a)(j.a.mark((function n(r){var i;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(v(e)),n.prev=1,n.next=4,t;case 4:return i=n.sent,r(h(e,i)),n.abrupt("return",i);case 9:n.prev=9,n.t0=n.catch(1),r(O(e,n.t0));case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}()},x=n(15),m=(r="/graphql",function(e,t){return fetch(r,{method:"POST",headers:Object(x.a)({"content-type":"application/json"},localStorage.authToken?{Authorization:"Bearer "+localStorage.authToken}:{}),body:JSON.stringify({query:e,variables:t})}).then((function(e){return e.json()}))}),g=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"query login($login:String!, $password:String!) {\n      login(\n         login: $login,\n         password: $password\n      )\n   }",e.next=3,m("query login($login:String!, $password:String!) {\n      login(\n         login: $login,\n         password: $password\n      )\n   }",{login:t,password:n});case 3:return r=e.sent,localStorage.authToken=r.data.login,console.log(r),e.abrupt("return",r.data.login);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(b.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"mutation reg($login:String!, $password:String!) {\n      createUser(\n         login: $login,\n         password: $password\n      ) {\n         _id\n      }\n   }",e.next=3,m("mutation reg($login:String!, $password:String!) {\n      createUser(\n         login: $login,\n         password: $password\n      ) {\n         _id\n      }\n   }",{login:t,password:n});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"query userOne($query:String) {\n      UserFindOne(query:$query) {\n         _id  avatar {\n            url\n         }\n      }\n   }",e.next=3,m("query userOne($query:String) {\n      UserFindOne(query:$query) {\n         _id  avatar {\n            url\n         }\n      }\n   }",{query:JSON.stringify([{_id:t}])});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(b.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"mutation setAvatar($idUser:String , $idAvatar:ID) { \n      UserUpsert(user:{_id: $idUser, avatar: {_id: $idAvatar}}) {\n         _id, avatar {\n            url\n         }\n      }\n   }",e.next=3,m("mutation setAvatar($idUser:String , $idAvatar:ID) { \n      UserUpsert(user:{_id: $idUser, avatar: {_id: $idAvatar}}) {\n         _id, avatar {\n            url\n         }\n      }\n   }",{idUser:t,idAvatar:n});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_=function(){var e=Object(b.a)(j.a.mark((function e(t,n,r,i){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"mutation newSnippet($snippet:SnippetInput) {\n      SnippetUpsert(snippet:$snippet){\n        _id\n      }\n   }",e.next=3,m("mutation newSnippet($snippet:SnippetInput) {\n      SnippetUpsert(snippet:$snippet){\n        _id\n      }\n   }",{snippet:{title:t,description:n,files:r,_id:i}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),k=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"query snippetFind($query:String) {\n      SnippetFind(query:$query) {\n         owner {\n            _id\n         }\n         title description _id files {\n            type text name\n         }\n      }\n   }",e.next=3,m("query snippetFind($query:String) {\n      SnippetFind(query:$query) {\n         owner {\n            _id\n         }\n         title description _id files {\n            type text name\n         }\n      }\n   }",{query:JSON.stringify([{_id:t}])});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"query snippetFind($query:String) {\n      SnippetFind(query:$query) {\n         owner {\n            _id\n         }\n         title description _id files {\n            type text name\n         }\n      }\n   }",e.next=3,m("query snippetFind($query:String) {\n      SnippetFind(query:$query) {\n         owner {\n            _id\n         }\n         title description _id files {\n            type text name\n         }\n      }\n   }",{query:JSON.stringify([{___owner:t},{sort:[{_id:-1}]}])});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"query snippetFind($query:String) {\n      SnippetFind(query:$query) {\n         owner {\n            _id login\n         }\n         title description _id files {\n            type text name\n         }\n      }\n   }",e.next=3,m("query snippetFind($query:String) {\n      SnippetFind(query:$query) {\n         owner {\n            _id login\n         }\n         title description _id files {\n            type text name\n         }\n      }\n   }",{query:JSON.stringify([{$or:[{title:"/".concat(t.trim().split(" ").join("|"),"/")},{description:"/".concat(t.trim().split(" ").join("|"),"/")}]},{sort:[{title:1}]}])});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(e,t){return f("login",g(e,t))},q=function(){return function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r,i,a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(f("findUser",S(null===(r=n())||void 0===r||null===(i=r.auth)||void 0===i||null===(a=i.payload)||void 0===a||null===(c=a.sub)||void 0===c?void 0:c.id)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},F=function(e,t){return function(){var n=Object(b.a)(j.a.mark((function n(r){var i;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r($(e,t));case 2:return null!==(i=n.sent)?r({type:"LOGIN",token:i}):(alert("User doesn\u2019t exist!"),localStorage.clear()),n.next=6,r(q());case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},T=function(e,t){return f("reg",y(e,t))},U=n(5),I=n(0),L=(n(30),function(e){var t=e.history;return Object(I.jsxs)("section",{id:"body",children:[Object(I.jsx)("div",{className:"content",children:Object(I.jsx)("h1",{children:"CodePen FiLL Project"})}),Object(I.jsx)("button",{onClick:function(){return t.push("./login")},children:"Login"}),Object(I.jsx)("button",{onClick:function(){return t.push("./reg")},children:"Reristration"})]})}),B=n(41),E=function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=new FormData).append("photo",e),t.next=4,n(f("upload",fetch("/upload",{method:"POST",headers:localStorage.authToken?{Authorization:"Bearer "+localStorage.authToken}:{},body:r}).then((function(e){return e.json()}))));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},A=function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n,r){var i,a,c,o;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(f("setAvatar",w(null===(i=r())||void 0===i||null===(a=i.auth)||void 0===a||null===(c=a.payload)||void 0===c||null===(o=c.sub)||void 0===o?void 0:o.id,e)));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()};n(27);var P=Object(s.b)((function(e){var t,n,r,i,a,c;return{link:null===e||void 0===e||null===(t=e.promise)||void 0===t||null===(n=t.findUser)||void 0===n||null===(r=n.payload)||void 0===r||null===(i=r.data)||void 0===i||null===(a=i.UserFindOne)||void 0===a||null===(c=a.avatar)||void 0===c?void 0:c.url}}))((function(e){var t=e.link;return Object(I.jsx)("img",{src:t?"http://localhost:3000/"+t:"https://cdnb.artstation.com/p/assets/images/images/013/085/927/large/furio-tedeschi-mechsmoke.jpg?1537981733",className:"avatar",alt:"avatar"})})),D=Object(s.b)(null,{onUpload:function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(E(e));case 2:return r=t.sent,t.next=5,n(A(r._id));case 5:return t.next=7,n(q());case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.onUpload,n=Object(B.a)(),r=n.acceptedFiles,i=n.getRootProps,a=n.getInputProps,c=r.map((function(e){return t(e)}));return console.log(c),Object(I.jsxs)("div",Object(x.a)(Object(x.a)({},i({})),{},{children:[Object(I.jsx)("input",Object(x.a)({},a())),Object(I.jsx)(P,{})]}))})),R=Object(s.b)((function(e){var t,n,r;return{username:null===e||void 0===e||null===(t=e.auth)||void 0===t||null===(n=t.payload)||void 0===n||null===(r=n.sub)||void 0===r?void 0:r.login,logedIn:e.auth.token}}),{onLogOut:function(){return{type:"LOGOUT"}}})((function(e){var t=e.username,n=e.onLogOut;return Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)("div",{className:"heared_user",children:[Object(I.jsx)("div",{children:t}),Object(I.jsx)("a",{href:"/search",children:Object(I.jsx)("button",{children:"Search"})}),Object(I.jsx)("a",{href:"/snippets",children:Object(I.jsx)("button",{className:"button_snippets",children:"My Snippets"})}),Object(I.jsx)("a",{href:"/",children:Object(I.jsx)("button",{onClick:function(){return n()},children:"Log out"})})]})})})),M=function(){return Object(I.jsxs)("nav",{className:"header",children:[Object(I.jsx)(D,{}),Object(I.jsx)(R,{})]})},z=n(16),G={textmate:"textmate",monokai:"monokai",xcode:"xcode",terminal:"terminal",github:"github",solarized_dark:"solarized_dark"},J=function(e){var t=e.listObj,n=void 0===t?G:t,r=e.onChange,i=e.value;return Object(I.jsx)("select",{value:i,onChange:function(e){return r(e.target.value)},children:Object.entries(n).map((function(e){var t=Object(U.a)(e,2),n=t[0],r=t[1];return Object(I.jsx)("option",{value:n,children:r},n)}))})},V={12:12,16:16,20:20,28:28,32:32,40:40},H=function(e){var t=e.listObj,n=void 0===t?V:t,r=e.onChange,i=e.value;return Object(I.jsx)("select",{value:i,onChange:function(e){return r(e.target.value)},children:Object.entries(n).map((function(e){var t=Object(U.a)(e,2),n=t[0],r=t[1];return Object(I.jsx)("option",{value:n,children:r},n)}))})},K=(n(28),n(37)),Q=n.n(K),W=(n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),{html:"html",css:"css",javascript:"js",java:"java",python:"python",xml:"xml",json:"json",typescript:"typescript",markdown:"markdown",mysql:"mysql"}),X=function(e){var t=e.listObj,n=void 0===t?W:t,r=e.onChange,i=e.value;return Object(I.jsx)("select",{value:i,onChange:function(e){return r(e.target.value)},children:Object.entries(n).map((function(e){var t=Object(U.a)(e,2),n=t[0],r=t[1];return Object(I.jsx)("option",{value:n,children:r},n)}))})},Y=(n(76),function(e){var t=e.data,n=void 0===t?{type:"",name:"",text:"",index:""}:t,r=e.onChange,i=e.theme,a=e.font;return Object(I.jsxs)("div",{className:"all_editors",children:[" ","Editor: "," ",Object(I.jsx)(X,{onChange:function(e){return r({type:e,text:n.text,name:n.name})},value:n.type}),Object(I.jsx)("br",{}),"Name of editor: ",Object(I.jsx)("input",{placeholder:"Enter a name for your editor",type:"text",value:n.name,onChange:function(e){return r({type:n.type,text:n.text,name:e.target.value})}}),Object(I.jsx)(Q.a,{className:"editor",value:n.text,onChange:function(e){return r({type:n.type,text:e,name:n.name})},placeholder:"Enter some code",mode:n.type,name:n.name,theme:i,fontSize:Number(a),showPrintMargin:!0,showGutter:!0,highlightActiveLine:!0,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2}})]})}),Z=[{type:"html",name:"",text:""},{type:"css",name:"",text:""},{type:"javascript",name:"",text:""}],ee=function(e,t,n,r){return function(){var i=Object(b.a)(j.a.mark((function i(a){return j.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,a(f("addSnippet",_(e,t,n,r)));case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}()},te=function(){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(M,{}),Object(I.jsx)(ne,{})]})},ne=Object(s.b)(null,{onSave:ee})((function(e){var t=e.onSave,n=Object(i.useState)(Z),r=Object(U.a)(n,2),a=r[0],c=r[1],o=Object(i.useState)(""),s=Object(U.a)(o,2),u=s[0],l=s[1],p=Object(i.useState)(""),d=Object(U.a)(p,2),j=d[0],b=d[1],v=Object(i.useState)(""),h=Object(U.a)(v,2),O=h[0],f=h[1],x=Object(i.useState)(),m=Object(U.a)(x,2),g=m[0],y=m[1],S=Object(i.useState)(),w=Object(U.a)(S,2),_=w[0],k=w[1];return Object(i.useEffect)((function(){var e=setTimeout((function(){var e={html:"",css:"",javascript:""};a.forEach((function(t){var n=t.type,r=t.text;return e[n]=r})),f("\n            <html>\n              <body>".concat(e.html,"</body>\n              <style>").concat(e.css,"</style>\n              <script>").concat(e.javascript,"<\/script>\n            </html>\n          "))}),300);return function(){return clearTimeout(e)}}),[a]),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("div",{className:"styles",children:[Object(I.jsxs)("div",{className:"text",children:["Set Snippet name:",Object(I.jsx)("input",{className:"input_snippet_name",placeholder:"Snippet name",value:u,onChange:function(e){return l(e.target.value)}})]}),Object(I.jsxs)("div",{className:"text",children:["Description:",Object(I.jsx)("textarea",{className:"textarea_snippet_description",placeholder:"Description",value:j,onChange:function(e){return b(e.target.value)}})]}),Object(I.jsx)("button",{className:"button_snippet_creation",onClick:function(){return t(u,j,a)},children:"Create snippet"}),Object(I.jsx)("br",{}),"Theme: ",Object(I.jsx)(J,{onChange:y,value:g}),Object(I.jsx)("br",{}),"FontSize: ",Object(I.jsx)(H,{onChange:k,value:_}),Object(I.jsx)("br",{}),Object(I.jsx)("button",{className:"button_add_snippet",onClick:function(){return c([].concat(Object(z.a)(a),[{type:"",name:"",text:""}]))},children:"+"}),Object(I.jsx)("button",{className:"button_add_snippet",onClick:function(){a.pop(),c(Object(z.a)(a))},children:"-"})]}),a.map((function(e,t){return Object(I.jsx)(Y,{data:e,theme:g,font:_,onChange:function(e){var n=Object(z.a)(a);n.splice(t,1,e),c(n)}},t)})),Object(I.jsx)("div",{className:"pane",children:Object(I.jsx)("iframe",{srcDoc:O,title:"output",sandbox:"allow-scripts",frameBorder:"0",width:"100%",height:"100%"})})]})})),re=Object(s.b)((function(e){var t,n,r,i;return{snippets:null===e||void 0===e||null===(t=e.promise)||void 0===t||null===(n=t.searchSnippet)||void 0===n||null===(r=n.payload)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.SnippetFind}}),{onSearch:function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(f("searchSnippet",C(e)));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.onSearch,n=e.snippets,r=Object(i.useState)(""),a=Object(U.a)(r,2),c=a[0],o=a[1];return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(u.b,{to:"/snippet",children:Object(I.jsx)("div",{children:Object(I.jsx)("button",{children:"Back to snippet"})})}),Object(I.jsx)("br",{}),Object(I.jsxs)("div",{children:[Object(I.jsx)("input",{value:c,onChange:function(e){return o(e.target.value)},type:"search",placeholder:"Name or description","aria-label":"Search"}),Object(I.jsx)("br",{}),Object(I.jsx)("div",{children:Object(I.jsx)("button",{onClick:function(){return t(c)},children:"Search"})})]}),Object(I.jsx)("div",{children:null===n||void 0===n?void 0:n.map((function(e){return Object(I.jsx)("div",{children:Object(I.jsxs)("div",{children:[Object(I.jsx)("p",{children:"Name: ".concat(e.title)||!1}),Object(I.jsx)("p",{children:"Description: ".concat(e.description)||!1}),Object(I.jsx)("p",{children:"Owner: ".concat(e.owner.login)}),Object(I.jsx)("img",{src:"https://www.datocms-assets.com/45470/1631110818-logo-react-js.png?fm=webp",alt:"code"}),Object(I.jsx)("div",{children:Object(I.jsx)(u.b,{to:"/search-snippet/"+e._id,children:Object(I.jsx)("button",{children:"Open snippet"})})})]})},e._id)}))})]})})),ie=re,ae=function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(f("findSnippetById",k(e)));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ce=Object(s.b)((function(e){var t,n,r,i,a,c,o,s,u,l,p,d,j,b,v,h,O,f;return{titleText:null===e||void 0===e||null===(t=e.promise)||void 0===t||null===(n=t.findSnippetById)||void 0===n||null===(r=n.payload)||void 0===r||null===(i=r.data)||void 0===i||null===(a=i.SnippetFind)||void 0===a||null===(c=a[0])||void 0===c?void 0:c.title,descriptionText:null===e||void 0===e||null===(o=e.promise)||void 0===o||null===(s=o.findSnippetById)||void 0===s||null===(u=s.payload)||void 0===u||null===(l=u.data)||void 0===l||null===(p=l.SnippetFind)||void 0===p||null===(d=p[0])||void 0===d?void 0:d.description,filesArr:null===e||void 0===e||null===(j=e.promise)||void 0===j||null===(b=j.findSnippetById)||void 0===b||null===(v=b.payload)||void 0===v||null===(h=v.data)||void 0===h||null===(O=h.SnippetFind)||void 0===O||null===(f=O[0])||void 0===f?void 0:f.files}}),{getSnippet:ae})((function(e){var t,n,r,a=e.getSnippet,c=e.match.params.id,o=e.titleText,s=e.descriptionText,l=e.filesArr;Object(i.useEffect)((function(){a(c)}),[c,a]);var p=Object(i.useState)([]),d=Object(U.a)(p,2),j=d[0],b=d[1],v=Object(i.useState)(""),h=Object(U.a)(v,2),O=h[0],f=h[1],x=Object(i.useState)(""),m=Object(U.a)(x,2),g=m[0],y=m[1];Object(i.useEffect)((function(){b(l),f(o),y(s)}),[l,o,s]);var S=Object(i.useState)(""),w=Object(U.a)(S,2),_=w[0],k=w[1],N=null===j||void 0===j||null===(t=j.filter((function(e){return"html"===(null===e||void 0===e?void 0:e.type)}))[0])||void 0===t?void 0:t.text,C=null===j||void 0===j||null===(n=j.filter((function(e){return"css"===(null===e||void 0===e?void 0:e.type)}))[0])||void 0===n?void 0:n.text,$=null===j||void 0===j||null===(r=j.filter((function(e){return"javascript"===(null===e||void 0===e?void 0:e.type)}))[0])||void 0===r?void 0:r.text;return console.log($),Object(i.useEffect)((function(){var e=setTimeout((function(){k("\n            <html>\n              <body>".concat(N,"</body>\n              <style>").concat(C,"</style>\n              <script>").concat($,"<\/script>\n            </html>\n          "))}),250);return function(){return clearTimeout(e)}}),[N,C,$]),Object(I.jsxs)("div",{children:[Object(I.jsx)("div",{children:Object(I.jsx)(u.b,{to:"/search",children:Object(I.jsx)("button",{style:{margin:10,marginBottom:50},children:"Back to Search"})})}),Object(I.jsxs)("div",{children:[Object(I.jsx)("p",{className:"text",children:"Snippet name: "}),Object(I.jsx)("input",{className:"input_snippet_name",placeholder:"Set snippet Name",value:O,onChange:function(e){return f(e.target.value)}})]}),Object(I.jsx)("p",{className:"text",children:"Description: "}),Object(I.jsx)("textarea",{className:"textarea_snippet_description",placeholder:"Description",value:g,onChange:function(e){return y(e.target.value)},style:{marginBottom:50}}),Object(I.jsx)("br",{}),null===j||void 0===j?void 0:j.map((function(e,t){return Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(Y,{data:e,onChange:function(e){var n=e.type,r=e.name,i=e.text;return b([].concat(Object(z.a)(j.slice(0,t)),[{type:n,name:r,text:i}],Object(z.a)(j.slice(t,1))))}})})})),Object(I.jsx)("br",{}),Object(I.jsx)("div",{children:Object(I.jsx)("div",{children:Object(I.jsx)("iframe",{className:"pane",srcDoc:_,title:"output",sandbox:"allow-scripts",frameBorder:"0",style:{marginTop:20},width:"95%",height:"95%"})})})]})})),oe=ce,se=Object(s.b)((function(e){var t,n,r,i;return{snippets:null===e||void 0===e||null===(t=e.promise)||void 0===t||null===(n=t.findSnippet)||void 0===n||null===(r=n.payload)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.SnippetFind}}))((function(e){var t=e.snippets;return t?Object(I.jsxs)("div",{children:[Object(I.jsx)("div",{style:{margin:10},children:Object(I.jsx)("div",{children:Object(I.jsx)(u.b,{to:"/snippet",children:Object(I.jsx)("button",{style:{marginTop:5},children:"New project"})})})}),Object(I.jsx)("br",{}),Object(I.jsx)("div",{children:null===t||void 0===t?void 0:t.map((function(e){return Object(I.jsx)("div",{children:Object(I.jsxs)("div",{children:[Object(I.jsx)("p",{children:"Name: ".concat(e.title)||!1}),Object(I.jsx)("p",{children:"Description: ".concat(e.description)||!1}),Object(I.jsx)("img",{src:"https://www.datocms-assets.com/45470/1631110818-logo-react-js.png?fm=webp",alt:"code"}),Object(I.jsx)("div",{children:Object(I.jsx)(u.b,{to:"/my-snippet/"+e._id,children:Object(I.jsx)("button",{children:"Open project"})})})]})},e._id)}))})]}):Object(I.jsxs)("div",{children:[Object(I.jsx)(u.b,{to:"/",children:Object(I.jsx)("button",{children:"Back to Main Page"})})," ",Object(I.jsx)("br",{})," ",Object(I.jsx)("br",{}),Object(I.jsx)("div",{children:Object(I.jsx)("span",{style:{margin:10,fontSize:20},children:"Loading..."})})]})})),ue=Object(s.b)((function(e){var t,n,r,i,a,c,o,s,u,l,p,d,j,b,v,h,O,f;return{titleText:null===e||void 0===e||null===(t=e.promise)||void 0===t||null===(n=t.findSnippetById)||void 0===n||null===(r=n.payload)||void 0===r||null===(i=r.data)||void 0===i||null===(a=i.SnippetFind)||void 0===a||null===(c=a[0])||void 0===c?void 0:c.title,descriptionText:null===e||void 0===e||null===(o=e.promise)||void 0===o||null===(s=o.findSnippetById)||void 0===s||null===(u=s.payload)||void 0===u||null===(l=u.data)||void 0===l||null===(p=l.SnippetFind)||void 0===p||null===(d=p[0])||void 0===d?void 0:d.description,filesArr:null===e||void 0===e||null===(j=e.promise)||void 0===j||null===(b=j.findSnippetById)||void 0===b||null===(v=b.payload)||void 0===v||null===(h=v.data)||void 0===h||null===(O=h.SnippetFind)||void 0===O||null===(f=O[0])||void 0===f?void 0:f.files}}),{getSnippet:ae,onSave:ee})((function(e){var t,n,r,a=e.onSave,c=e.getSnippet,o=e.match.params.id,s=e.titleText,l=e.descriptionText,p=e.filesArr;Object(i.useEffect)((function(){c(o)}),[o,c]);var d=Object(i.useState)([]),j=Object(U.a)(d,2),b=j[0],v=j[1],h=Object(i.useState)(""),O=Object(U.a)(h,2),f=O[0],x=O[1],m=Object(i.useState)(""),g=Object(U.a)(m,2),y=g[0],S=g[1];Object(i.useEffect)((function(){v(p),x(s),S(l)}),[p,s,l]);var w=Object(i.useState)(""),_=Object(U.a)(w,2),k=_[0],N=_[1],C=null===b||void 0===b||null===(t=b.filter((function(e){return"html"===(null===e||void 0===e?void 0:e.type)}))[0])||void 0===t?void 0:t.text,$=null===b||void 0===b||null===(n=b.filter((function(e){return"css"===(null===e||void 0===e?void 0:e.type)}))[0])||void 0===n?void 0:n.text,q=null===b||void 0===b||null===(r=b.filter((function(e){return"js"===(null===e||void 0===e?void 0:e.type)}))[0])||void 0===r?void 0:r.text;return console.log(q),Object(i.useEffect)((function(){var e=setTimeout((function(){N("\n            <html>\n              <body>".concat(C,"</body>\n              <style>").concat($,"</style>\n              <script>").concat(q,"<\/script>\n            </html>\n          "))}),250);return function(){return clearTimeout(e)}}),[C,$,q]),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("div",{children:Object(I.jsx)(u.b,{to:"/snippets",children:Object(I.jsx)("button",{style:{margin:10,marginBottom:50},children:"Back to All Projects"})})}),Object(I.jsxs)("div",{className:"text",children:["Set Snippet name:",Object(I.jsx)("input",{className:"input_snippet_name",placeholder:"Snippet name",value:f,onChange:function(e){return x(e.target.value)}})]}),Object(I.jsxs)("div",{className:"text",children:["Description:",Object(I.jsx)("textarea",{className:"textarea_snippet_description",placeholder:"Description",value:y,onChange:function(e){return S(e.target.value)}})]}),Object(I.jsx)("button",{className:"button_snippet_creation",onClick:function(){return a(f,y,b)},children:"Create snippet"}),Object(I.jsx)("br",{}),null===b||void 0===b?void 0:b.map((function(e,t){return Object(I.jsx)(Y,{data:e,onChange:function(e){var n=Object(z.a)(b);n.splice(t,1,e),v(n)}},t)})),Object(I.jsx)("div",{className:"pane",children:Object(I.jsx)("iframe",{srcDoc:k,title:"output",sandbox:"allow-scripts",frameBorder:"0",width:"100%",height:"100%"})})]})})),le=ue,pe=p.a(),de=Object(s.b)(null,{onLogin:F})((function(e){var t=e.onLogin,n=Object(i.useState)(""),r=Object(U.a)(n,2),a=r[0],c=r[1],o=Object(i.useState)(""),s=Object(U.a)(o,2),u=s[0],l=s[1];return Object(I.jsxs)("div",{className:"login",children:[Object(I.jsx)("h3",{children:"Login"}),Object(I.jsx)("input",{className:"username",type:"login",placeholder:"Username",value:a,onChange:function(e){return c(e.target.value)}}),Object(I.jsx)("input",{className:"password",type:"password",placeholder:"Password",value:u,onChange:function(e){return l(e.target.value)}}),Object(I.jsx)("button",{type:"submit",className:"button-submit",disabled:!a||!u,onClick:function(){return t(a,u)},children:"Authorize"}),Object(I.jsx)("button",{children:Object(I.jsx)("a",{href:"/",children:"Main page"})})]})})),je=Object(s.b)(null,{Reg:function(e,t){return function(){var n=Object(b.a)(j.a.mark((function n(r){var i,a;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r(T(e,t));case 2:null!==(null===(a=n.sent)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.createUser)?r(F(e,t)):alert("User already exists!");case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.Reg,n=Object(i.useState)(""),r=Object(U.a)(n,2),a=r[0],c=r[1],o=Object(i.useState)(""),s=Object(U.a)(o,2),u=s[0],l=s[1],p=Object(i.useState)(""),d=Object(U.a)(p,2),j=d[0],b=d[1];return Object(I.jsxs)("div",{className:"login",children:[Object(I.jsx)("h3",{children:"Registration"}),Object(I.jsx)("input",{className:"username",type:"login",placeholder:"Username",value:a,onChange:function(e){return c(e.target.value)}}),Object(I.jsx)("input",{className:"password",type:"password",placeholder:"Password",value:u,onChange:function(e){return l(e.target.value)}}),Object(I.jsx)("input",{className:"password-confirm",type:"password",placeholder:"Confinm Password",value:j,onChange:function(e){return b(e.target.value)}}),Object(I.jsxs)("button",{type:"submit",className:"button-submit",disabled:!a||!u||u!==j,onClick:function(){return t(a,u)},children:["Remember me."," "]}),Object(I.jsx)("button",{className:"main_page",children:Object(I.jsx)("a",{href:"/",children:"Main page"})})]})})),be=Object(s.b)((function(e){return{token:e.auth.token}}),null)((function(e){var t=e.token;return Object(I.jsx)("div",{className:"App",children:Object(I.jsxs)(u.a,{history:pe,children:[t&&Object(I.jsxs)(l.d,{children:[Object(I.jsx)(l.a,{from:"/login",to:"/snippet"}),Object(I.jsx)(l.a,{from:"/reg",to:"/snippet"}),Object(I.jsx)(l.b,{exact:!0,path:"/snippet",component:te}),Object(I.jsx)(l.b,{path:"/snippets",component:se}),Object(I.jsx)(l.b,{path:"/search-snippet/:id",component:oe}),Object(I.jsx)(l.b,{path:"/my-snippet/:id",component:le}),Object(I.jsx)(l.b,{path:"/search",component:ie})]}),!t&&Object(I.jsxs)(l.d,{children:[Object(I.jsx)(l.b,{path:"/login",component:de}),Object(I.jsx)(l.b,{path:"/reg",component:je}),Object(I.jsx)(l.b,{path:"/",component:L})]})]})})})),ve=n(24),he=n(39),Oe=n(40),fe=function(e){return JSON.parse(Object(Oe.decode)(e.split(".")[1]))};var xe=function(e,t){var n=t.type,r=t.token;if(void 0===e){if(!localStorage.authToken)return{};n="LOGIN",r=localStorage.authToken}return"LOGIN"===n?(console.log("LOGIN"),localStorage.authToken=r,{token:r,payload:fe(r)}):"LOGOUT"===n?(console.log("LOGOUT"),localStorage.removeItem("authToken"),{}):e},me=n(22);var ge,ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.status,i=t.payload,a=t.error,c=t.name;return"PROMISE"===n?Object(x.a)(Object(x.a)({},e),{},Object(me.a)({},c,{status:r,payload:i,error:a})):e},Se=Object(ve.b)({promise:ye,auth:xe}),we=Object(ve.c)(Se,Object(ve.a)(he.a));we.subscribe((function(){return console.log(we.getState())})),localStorage.authToken&&(we.dispatch(q()),we.dispatch((ge=we.getState().auth.payload.sub.id,function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(f("findSnippet",N(ge)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));var _e=we;n(80);var ke=function(){return Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(s.a,{store:_e,children:Object(I.jsx)(be,{})})})},Ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,82)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),i(e),a(e),c(e)}))};o.a.render(Object(I.jsx)(a.a.StrictMode,{children:Object(I.jsx)(ke,{})}),document.getElementById("root")),Ne()}},[[81,1,2]]]);
//# sourceMappingURL=main.b0b7c125.chunk.js.map